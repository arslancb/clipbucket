{assign var='required_fields' value=$documentquery->loadDocumentsFields($document)}
<h2>{lang("document_manager")}</h2>

<button class="btn btn-primary btn-sm" type="button" onclick="toggle_search('adddiv')" data-toggle="collapse" data-target="#addNewDisc" aria-expanded="false" aria-controls="addNewDisc">{if $showedit!=true} <span class="glyphicon glyphicon-plus"></span> {lang("add")}{else}<span class="glyphicon glyphicon-pencil"></span> {lang("edit")}{/if}</button>
<br/>
<div class="add_box" id="adddiv" {if $showadd!=true && $showedit!=true} style="display:none"{/if}>  
<form id="document_add" name="document_add" method="post" action="{$document_managepage}" class="document_add" enctype="multipart/form-data">
	<div class="well">
	{if $showedit==true} <input name="documentid" value="{$document.id}" id="documentid" type="hidden"><h3>{lang('edit_document_nb')}{$document.id}</h3>{/if}

			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label for="disc_name">{lang("title")}</label>
						<input type="text" class="form-control" name="title" id="title" value='{$document["title"]}'>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="form-group">
						<label for="filename">{lang("document")}</label>
						<input type="file"  name="filename" id="filename" class="" />
						{if $document.filename}
							<p class="help-block">{lang("actual_document")} : {$document["filename"]}</p>
						{/if}
					</div></div>
				</div>
			  <input type="submit" class="btn btn-primary btn-sm" name="addDocument" id="addDocument" value="{lang('add_document')}" class="button" {if $showedit==true} style="display:none"{/if}/>
			  <input type="submit" class="btn btn-primary btn-sm" name="updateDocument" id="updateDocument" value="{lang('update_document')}" class="button" {if $showedit!=true} style="display:none"{/if}/>
		</div>					
  <br/>
	
	    	
</form>
</div>
  <hr/>

<button class="btn btn-primary btn-sm" type="button" onclick="toggle_search('searchdiv')" ><span class="glyphicon glyphicon-search"></span>{lang('filter')}</button>
<br/>
<div class="search_box" id="searchdiv" {if $showfilter!=true} style="display:none"{/if}>  
	<div class="well">
		<form id="document_search" name="document_search" method="post" action="" class="document_search">
			<div class="row">
				<div class="col-sm-6">
					<div class="form-group">
						<label for="title">{lang('title')} </label> 
						<input name="title" class="form-control" type="text" class="input" id="title" value="{$title}" />
					</div>
				</div>
			</div>
		  <input type="submit" class="btn btn-primary btn-sm" name="filter" id="filter" value="{lang('document_filter')}" class="button"/>
		</form>
	</div>
</div>

{if $documents}
<hr/>
<!-- Displaying documents -->
<form name="manage_documents" method="post">
  <div class="btn-group marginBottomSmall">
    <input class="btn btn-danger btn-sm" type="submit" name="deleteSelected" value="{lang('delete_selected')}" onclick="return confirm_it('Are you sure you want to delete selected document(s)')"/>
  </div>
  
  
<table class="table table-bordered table-striped manageUsersTable">
<thead>
    <th width="40" align="center" valign="middle" class="left_head">
    <input type="checkbox" name="checkall" onclick="checkUncheckAll(this);"/></th>
    <th width="50" class="head">id</th>
    <th class="head">{lang('title')}</th>
    <th class="head">{lang('filename')}</th>
    <th class="head">{lang('filename_on_disk')}</th>
    <th>&nbsp;</th>
  </thead>
{foreach from=$documents item=u}
<tr>
    <td>
      <input name="check_document[]" type="checkbox" id="check_document" value="{$u.id}" />
    </td>
    <td>
      {$u.id}
    </td>
    <td>
        <div class="row">
            <div class="col-md-10">
                <div class="row">
                    <div class="col-md-9">
                        <a href="{$document_managepage}&editDocument={$u.id}" class="oneUserName">{$u.title}</a>
                    </div>
                </div>
            </div>
    </td>
    <td>
        <div class="row">
            <div class="col-md-10">
                <div class="row">
                    <div class="col-md-9">
                        {$u.filename}</span>
                    </div>
                </div>
            </div>
    </td>
    <td>
        <div class="row">
            <div class="col-md-10">
                <div class="row">
                    <div class="col-md-9">
                        {$u.storedfilename}
                    </div>
                </div>
            </div>
    </td>
    
    <td>
      <div id="document_opt-{$u.id}" class="dropdown pull-right">
      <button id="dropdownMenu1" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">
        {lang('actions')}<i class="icon-angle-down icon-on-right"></i>
      </button>
      <ul class="dropdown-menu" aria-labelledby="dropdownMenu1" role="menu">
         <li><a role="menuitem" tabindex="-1" href="{$document_managepage}&editDocument={$u.id}"><span class="glyphicon glyphicon-pencil"></span> {lang('edit')}</a></li>
        <li class="divider"></li>
        <li><a role="menuitem" tabindex="-1" href="{$document_managepage}&deleteDocument={$u.id}"><span class="glyphicon glyphicon-trash"></span> {lang('delete')}</a></li>
      </ul>
    </div>
    </td>
  </tr>
{if $bgcolor == ""}
{assign var = bgcolor value = "#EEEEEE"}
{else}
{assign var = bgcolor value = ""}
{/if}  
{/foreach}
</table>

<div class="btn-group">
    <input class="btn btn-danger btn-sm" type="submit" name="deleteSelected" value="{lang('delete_selected')}" onclick="return confirm_it('Are you sure you want to delete selected document(s)')"/>
  </div>
</form>
{else}
	<div align="center"><strong><em>{lang("no_document_found")}</em></strong></div>
{/if}



<!-- DIsplaying Videos Ends-->
{include file="$style_dir/blocks/pagination.html" }

